YUI.add("libbit-grid",function(e,t){var n,r;r=e.Base.create("templateView",e.View,[],{template:e.Handlebars.compile('<div class="template-grid-container" data-yui3-record="{{ clientId }}">    <div class="template-grid-icon-container">        <div class="template-grid-icon-wrapper">            <img class="template-grid-icon" height="100%" width="100%"></img>       </div>    </div>    <div class="template-grid-footer">        <div class="template-grid-name">{{ name }}</div>        <input class="edit" type="text" value="{{ name }}" />        <div class="template-grid-date">{{ dateCreated }}</div>    </div></div>'),events:{".template-grid-name":{click:"edit"},".edit":{blur:"close",keypress:"enterUpdate"},".template-grid-container":{contextmenu:"contextMenu"}},initializer:function(){},render:function(){var e=this.get("container"),t=this.get("model"),n;return n=this.template(t.getAttrs()),e.setContent(n),this.set("inputNode",e.one(".edit")),this.set("footerNode",e.one(".template-grid-footer")),this},edit:function(e){this.get("footerNode").addClass("editing"),this.get("inputNode").focus()},close:function(t){var n=this.get("inputNode").get("value"),r=e.Escape.html(e.Lang.trim(n)),i=this.get("model");this.get("footerNode").removeClass("editing"),r&&(i.set("name",r),i.save())},enterUpdate:function(e){var t=13;e.keyCode===t&&this.close()},contextMenu:function(t){var n=this.get("container"),r=this.get("model"),i;t.preventDefault(),e.Lang.isNull(e.one("#template-context"))===!1&&e.one("#template-context").remove(),i=new e.Overlay({bodyContent:'<div id="template-context" class="dropdown open"><ul class="dropdown-menu"><li><a data-event="templateDelete" href="#">Delete template</a></li><li><a data-event="templateDuplicate" href="#">Duplicate template</a></li></ul></div>',visible:!1,constrain:!0}),i.render(n),i.set("xy",[t.pageX,t.pageY]),i.show(),e.one("#template-context").all("a").each(function(t){t.on(["click","contextmenu"],function(i){i.preventDefault(),e.fire("templateContextMenu:"+t.getAttribute("data-event"),{node:n,model:r}),e.one("#template-context").remove()})})}}),n=e.Base.create("grid",e.Widget,[e.Libbit.Grid.Selectable],{initializer:function(e){var t=e.data},renderUI:function(){this._renderGridItems()},bindUI:function(){},_renderGridItems:function(){var e=this.get("contentBox"),t=this.get("data");t.each(function(t){var n=new r({model:t}),i=n.render().get("container");e.append(i)})}},{ATTRS:{data:{value:new e.ModelList}}}),e.namespace("Libbit").Grid=n},"@VERSION@",{requires:["handlebars","libbit-grid-select","model-list","view"],skinnable:!0});
