{# Set up the global YUI config object #}
YUI_config = {
    comboBase : '{{ path('libbit_yui_minify') }}?b={{ asset('bundles/libbityui')|trim('/') }}/yui3&f=',
    root: 'build/',
    combine: true,
    lang: '{{ app.request.locale }}',
    filter : {
        {# Reformat the comboloader URL to a Minify URL , ie: #}
        {# combo?file1.js&file2.js -> combo?f=file1.js,file2.js #}
        'searchExp': '(^(?:[^&]+&[^&]+)|[^&]+)&(?!f=)',
        'replaceStr': '$1,'
    },

    groups: {
        yui2: {
            comboBase : '{{ path('libbit_yui_minify') }}?b={{ asset('bundles/libbityui')|trim('/') }}/2in3/dist&f=',
            root: 'build/',
            combine: true,
            patterns: {
                'yui2-': {
                    configFn: function(me) {
                        if (/-skin|reset|fonts|grids|base/.test(me.name)) {
                            me.type = 'css';
                            me.path = me.path.replace(/\.js/, '.css');
                            // this makes skins in builds earlier than
                            // 2.6.0 work as long as combine is false
                            me.path = me.path.replace(/\/yui2-skin/,
                                             '/assets/skins/sam/yui2-skin');
                        }
                    }
                }
            }
        },

        gallery: {
            comboBase : '{{ path('libbit_yui_minify') }}?b={{ asset('bundles/libbityui')|trim('/') }}/yui3-gallery&f=',
            root: 'build/',
            combine: true,
            patterns: {
                'gallery-': {
                    {% if app.environment == 'dev' %}
                    configFn: function(me) {
                        me.path = me.path.replace('-min', '-debug');
                    }
                    {% endif %}
                },
                'lang/gallery-': {},
                'gallerycss-': { type: 'css' }
            }
        },

        libbit: {
            comboBase : '{{ path('libbit_yui_minify') }}?b={{ asset('bundles/libbityui')|trim('/') }}/yui3-libbit&f=',
            root: 'build/',
            combine: true,
            patterns: {
                'libbit-': {
                    {% if app.environment == 'dev' %}
                    configFn: function(me) {
                        me.path = me.path.replace('-min', '-debug');
                    }
                    {% endif %}
                }
            }
        }
    }
}
